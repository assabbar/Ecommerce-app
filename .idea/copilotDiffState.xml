<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/QUICK_REFERENCE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/QUICK_REFERENCE.md" />
              <option name="updatedContent" value="# Quick Reference Guide - Cheat Sheet&#10;&#10;##  Démarrage Rapide&#10;&#10;### Lancer l'Environnement Complet&#10;```bash&#10;# Démarrer tous les services (Docker)&#10;cd api-gateway  # ou depuis la racine&#10;docker-compose up -d&#10;&#10;# Vérifier que tous les services sont up&#10;docker-compose ps&#10;&#10;# Voir les logs&#10;docker-compose logs -f&#10;&#10;# Arrêter tout&#10;docker-compose down&#10;```&#10;&#10;### Lancer les Microservices Individuellement&#10;```bash&#10;# Terminal 1: Product Service&#10;cd product-service&#10;mvn spring-boot:run&#10;# Accéder: http://localhost:8080&#10;&#10;# Terminal 2: Order Service&#10;cd order-service&#10;mvn spring-boot:run&#10;# Accéder: http://localhost:8081&#10;&#10;# Terminal 3: Inventory Service&#10;cd inventory-service&#10;mvn spring-boot:run&#10;# Accéder: http://localhost:8082&#10;&#10;# Terminal 4: API Gateway&#10;cd api-gateway&#10;mvn spring-boot:run&#10;# Accéder: http://localhost:9000&#10;```&#10;&#10;---&#10;&#10;##  Endpoints de Test&#10;&#10;### Product Service (Via Gateway ou Directement)&#10;&#10;#### Créer un Produit&#10;```bash&#10;curl -X POST http://localhost:9000/api/product \&#10;  -H &quot;Content-Type: application/json&quot; \&#10;  -H &quot;Authorization: Bearer &lt;JWT_TOKEN&gt;&quot; \&#10;  -d '{&#10;    &quot;name&quot;: &quot;iPhone 15 Pro&quot;,&#10;    &quot;description&quot;: &quot;Latest Apple smartphone&quot;,&#10;    &quot;price&quot;: 999.99&#10;  }'&#10;&#10;# OU directement&#10;curl -X POST http://localhost:8080/api/product \&#10;  -H &quot;Content-Type: application/json&quot; \&#10;  -d '{&#10;    &quot;name&quot;: &quot;iPhone 15 Pro&quot;,&#10;    &quot;description&quot;: &quot;Latest Apple smartphone&quot;,&#10;    &quot;price&quot;: 999.99&#10;  }'&#10;```&#10;&#10;#### Récupérer Tous les Produits&#10;```bash&#10;curl http://localhost:9000/api/product&#10;# OU&#10;curl http://localhost:8080/api/product&#10;```&#10;&#10;---&#10;&#10;### Order Service&#10;&#10;#### Placer une Commande&#10;```bash&#10;curl -X POST http://localhost:9000/api/order \&#10;  -H &quot;Content-Type: application/json&quot; \&#10;  -H &quot;Authorization: Bearer &lt;JWT_TOKEN&gt;&quot; \&#10;  -d '{&#10;    &quot;skuCode&quot;: &quot;iphone_15&quot;,&#10;    &quot;price&quot;: 999.99,&#10;    &quot;quantity&quot;: 2,&#10;    &quot;userDetails&quot;: {&#10;      &quot;email&quot;: &quot;customer@example.com&quot;,&#10;      &quot;firstName&quot;: &quot;John&quot;,&#10;      &quot;lastName&quot;: &quot;Doe&quot;&#10;    }&#10;  }'&#10;&#10;# OU directement&#10;curl -X POST http://localhost:8081/api/order \&#10;  -H &quot;Content-Type: application/json&quot; \&#10;  -d '{&#10;    &quot;skuCode&quot;: &quot;iphone_15&quot;,&#10;    &quot;price&quot;: 999.99,&#10;    &quot;quantity&quot;: 2,&#10;    &quot;userDetails&quot;: {&#10;      &quot;email&quot;: &quot;customer@example.com&quot;,&#10;      &quot;firstName&quot;: &quot;John&quot;,&#10;      &quot;lastName&quot;: &quot;Doe&quot;&#10;    }&#10;  }'&#10;```&#10;&#10;---&#10;&#10;### Inventory Service&#10;&#10;#### Vérifier le Stock&#10;```bash&#10;curl http://localhost:9000/api/inventory?skuCode=iphone_15&amp;quantity=2&#10;&#10;# OU directement&#10;curl http://localhost:8082/api/inventory?skuCode=iphone_15&amp;quantity=2&#10;```&#10;&#10;---&#10;&#10;##  Monitoring &amp; Observability&#10;&#10;### Health Checks&#10;```bash&#10;# API Gateway&#10;curl http://localhost:9000/actuator/health&#10;&#10;# Product Service&#10;curl http://localhost:8080/actuator/health&#10;&#10;# Order Service&#10;curl http://localhost:8081/actuator/health&#10;&#10;# Inventory Service&#10;curl http://localhost:8082/actuator/health&#10;```&#10;&#10;### Métriques Prometheus&#10;```bash&#10;# Récupérer les métriques (format texte)&#10;curl http://localhost:8080/actuator/prometheus&#10;&#10;# Prometheus Dashboard&#10;http://localhost:9090&#10;&#10;# Query Example:&#10;# http_server_requests_seconds_count{service=&quot;product-service&quot;}&#10;```&#10;&#10;### Grafana Dashboards&#10;```&#10;URL: http://localhost:3000&#10;Default Username: admin&#10;Default Password: admin&#10;&#10;Available Dashboards:&#10;- JVM Metrics&#10;- HTTP Requests&#10;- Spring Boot Application Metrics&#10;- Custom Dashboards (à créer)&#10;```&#10;&#10;### Logs avec Loki&#10;```&#10;URL: http://localhost:3100&#10;Intégré dans Grafana:&#10;- Data Sources → Loki&#10;- Explore → Select Loki&#10;&#10;Query Examples:&#10;- {job=&quot;product-service&quot;} |= &quot;error&quot;&#10;- {service=&quot;order-service&quot;} | json | level = &quot;ERROR&quot;&#10;```&#10;&#10;### Distributed Tracing avec Tempo&#10;```&#10;URL: http://localhost:3200&#10;Intégré dans Grafana:&#10;- Data Sources → Tempo&#10;- Trace ID search&#10;&#10;Voir les traces complètes entre services&#10;```&#10;&#10;---&#10;&#10;## ️ Accès aux Bases de Données&#10;&#10;### MongoDB&#10;```bash&#10;# Avec Docker&#10;docker exec -it springcommerce_mongo mongosh \&#10;  -u root -p password \&#10;  --authenticationDatabase admin&#10;&#10;# Ou depuis Mongo Compass&#10;mongodb://root:password@localhost:27017/product-service?authSource=admin&#10;&#10;# Commandes utiles&#10;use product-service&#10;db.product.find()&#10;db.product.insertOne({name: &quot;Test&quot;, price: 100})&#10;db.product.deleteOne({_id: ObjectId(&quot;...&quot;)})&#10;```&#10;&#10;### MySQL&#10;```bash&#10;# Avec Docker&#10;docker exec -it springcommerce_mysql mysql \&#10;  -u root -p mysql&#10;&#10;# Ou avec client MySQL Workbench&#10;Host: localhost&#10;Port: 3306&#10;Username: root&#10;Password: mysql&#10;Database: order_service ou inventory_service&#10;&#10;# Commandes utiles&#10;USE order_service;&#10;SELECT * FROM t_orders;&#10;SELECT * FROM t_inventory;&#10;INSERT INTO t_inventory (skuCode, quantity) VALUES ('iphone_15', 10);&#10;```&#10;&#10;---&#10;&#10;##  Authentification avec Keycloak&#10;&#10;### Obtenir un JWT Token&#10;```bash&#10;# Keycloak Admin Console&#10;http://localhost:8181/admin&#10;&#10;# Default credentials&#10;Username: admin&#10;Password: admin&#10;&#10;# Obtenir un token (pour test)&#10;curl -X POST http://localhost:8181/realms/springcommerce/protocol/openid-connect/token \&#10;  -H &quot;Content-Type: application/x-www-form-urlencoded&quot; \&#10;  -d &quot;client_id=springcommerce-client&quot; \&#10;  -d &quot;client_secret=your-secret&quot; \&#10;  -d &quot;grant_type=password&quot; \&#10;  -d &quot;username=testuser&quot; \&#10;  -d &quot;password=testpass&quot;&#10;&#10;# Réponse&#10;{&#10;  &quot;access_token&quot;: &quot;eyJhbGciOiJSUzI1NiIsInR5cC...&quot;,&#10;  &quot;expires_in&quot;: 300,&#10;  &quot;refresh_expires_in&quot;: 1800,&#10;  &quot;token_type&quot;: &quot;Bearer&quot;&#10;}&#10;&#10;# Utiliser le token&#10;curl http://localhost:9000/api/product \&#10;  -H &quot;Authorization: Bearer &lt;access_token&gt;&quot;&#10;```&#10;&#10;---&#10;&#10;##  Commandes Utiles Maven&#10;&#10;### Build&#10;```bash&#10;# Build all services&#10;mvn clean package&#10;&#10;# Build single service&#10;cd product-service&#10;mvn clean package&#10;&#10;# Skip tests&#10;mvn clean package -DskipTests&#10;&#10;# Build with specific profile&#10;mvn clean package -P production&#10;```&#10;&#10;### Test&#10;```bash&#10;# Run all tests&#10;mvn test&#10;&#10;# Run specific test&#10;mvn test -Dtest=OrderServiceTest&#10;&#10;# Run tests in specific module&#10;cd order-service&#10;mvn test&#10;&#10;# Run integration tests (with TestContainers)&#10;mvn verify&#10;```&#10;&#10;### Run&#10;```bash&#10;# Run with Maven&#10;mvn spring-boot:run&#10;&#10;# Run with Java directly&#10;java -jar target/product-service-0.0.1-SNAPSHOT.jar&#10;&#10;# Run with custom port&#10;mvn spring-boot:run -Dspring-boot.run.arguments=&quot;--server.port=9000&quot;&#10;```&#10;&#10;---&#10;&#10;##  Docker Commands&#10;&#10;### Image Operations&#10;```bash&#10;# Build image&#10;docker build -t springcommerce/product-service:1.0 .&#10;&#10;# List images&#10;docker images&#10;&#10;# Remove image&#10;docker rmi &lt;image_id&gt;&#10;&#10;# Push to registry&#10;docker push registry.example.com/product-service:1.0&#10;```&#10;&#10;### Container Operations&#10;```bash&#10;# Run container&#10;docker run -d -p 8080:8080 \&#10;  --name product-service \&#10;  springcommerce/product-service:1.0&#10;&#10;# List running containers&#10;docker ps&#10;&#10;# View logs&#10;docker logs -f product-service&#10;&#10;# Stop container&#10;docker stop product-service&#10;&#10;# Remove container&#10;docker rm product-service&#10;```&#10;&#10;### Docker Compose&#10;```bash&#10;# Start all services&#10;docker-compose up -d&#10;&#10;# Start specific service&#10;docker-compose up -d product-service&#10;&#10;# Stop all&#10;docker-compose down&#10;&#10;# Stop specific service&#10;docker-compose down product-service&#10;&#10;# View logs&#10;docker-compose logs -f&#10;&#10;# Rebuild images&#10;docker-compose build --no-cache&#10;```&#10;&#10;---&#10;&#10;##  Configuration Files Essentiels&#10;&#10;### application.properties&#10;Location: `src/main/resources/application.properties`&#10;&#10;**Key Configurations:**&#10;```properties&#10;# Service name and port&#10;spring.application.name=product-service&#10;server.port=8080&#10;&#10;# Database&#10;spring.datasource.url=jdbc:mysql://localhost:3306/database&#10;spring.datasource.username=root&#10;spring.datasource.password=mysql&#10;&#10;# MongoDB&#10;spring.data.mongodb.uri=mongodb://root:password@localhost:27017/db?authSource=admin&#10;&#10;# Kafka&#10;spring.kafka.bootstrap-servers=localhost:9092&#10;spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer&#10;&#10;# Actuator/Monitoring&#10;management.endpoints.web.exposure.include=health,metrics,prometheus&#10;&#10;# Resilience4J&#10;resilience4j.circuitbreaker.instances.inventory.slidingWindowSize=10&#10;resilience4j.circuitbreaker.instances.inventory.failureRateThreshold=50&#10;```&#10;&#10;### docker-compose.yml&#10;Location: Root directory or service directory&#10;&#10;**Key Services:**&#10;```yaml&#10;version: '3.8'&#10;services:&#10;  mysql:&#10;    image: mysql:8.0&#10;    environment:&#10;      MYSQL_ROOT_PASSWORD: mysql&#10;      MYSQL_DATABASE: order_service&#10;    ports:&#10;      - &quot;3306:3306&quot;&#10;&#10;  mongodb:&#10;    image: mongo:5.0&#10;    environment:&#10;      MONGO_INITDB_ROOT_USERNAME: root&#10;      MONGO_INITDB_ROOT_PASSWORD: password&#10;    ports:&#10;      - &quot;27017:27017&quot;&#10;&#10;  kafka:&#10;    image: confluentinc/cp-kafka:7.4.0&#10;    ports:&#10;      - &quot;9092:9092&quot;&#10;```&#10;&#10;---&#10;&#10;##  Debugging&#10;&#10;### Enable Debug Mode&#10;```bash&#10;# Via Maven&#10;mvn spring-boot:run -Dspring-boot.run.jvmArguments=&quot;-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005&quot;&#10;&#10;# Via IDE&#10;# Set debug breakpoints in IDE&#10;# Run → Debug&#10;# Port: 5005 (default)&#10;```&#10;&#10;### View Application Logs&#10;```bash&#10;# Default log file&#10;tail -f logs/spring.log&#10;&#10;# Filter by level&#10;grep ERROR logs/spring.log&#10;grep WARN logs/spring.log&#10;&#10;# Real-time from Docker&#10;docker logs -f product-service&#10;&#10;# From docker-compose&#10;docker-compose logs -f product-service&#10;```&#10;&#10;### Performance Profiling&#10;```bash&#10;# JVM Metrics&#10;curl http://localhost:8080/actuator/metrics/jvm.memory.usage&#10;&#10;# Thread info&#10;curl http://localhost:8080/actuator/threaddump&#10;&#10;# Heap dump&#10;curl http://localhost:8080/actuator/heapdump &gt; heapdump.hprof&#10;```&#10;&#10;---&#10;&#10;##  Common Tasks&#10;&#10;### Add a New Dependency&#10;```bash&#10;# Edit pom.xml&#10;&lt;dependency&gt;&#10;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&#10;&lt;/dependency&gt;&#10;&#10;# Reload in IDE or run&#10;mvn clean install&#10;```&#10;&#10;### Create a Database Migration&#10;```bash&#10;# For Flyway in src/main/resources/db/migration/&#10;&#10;# Create file: V2__add_new_column.sql&#10;ALTER TABLE t_orders ADD COLUMN status VARCHAR(20);&#10;&#10;# Run with:&#10;mvn spring-boot:run&#10;# Migration executes automatically&#10;```&#10;&#10;### Add a New REST Endpoint&#10;```java&#10;@RestController&#10;@RequestMapping(&quot;/api/product&quot;)&#10;public class ProductController {&#10;    &#10;    @GetMapping(&quot;/{id}&quot;)&#10;    public ProductResponse getProduct(@PathVariable String id) {&#10;        return productService.getProduct(id);&#10;    }&#10;}&#10;```&#10;&#10;### Add Kafka Consumer&#10;```java&#10;@Service&#10;@RequiredArgsConstructor&#10;public class OrderEventListener {&#10;    &#10;    @KafkaListener(topics = &quot;order-placed&quot;)&#10;    public void handleOrderPlaced(OrderPlacedEvent event) {&#10;        // Process event&#10;        System.out.println(&quot;Order placed: &quot; + event.getOrderNumber());&#10;    }&#10;}&#10;```&#10;&#10;### Add Circuit Breaker&#10;```java&#10;@Service&#10;public class MyService {&#10;    &#10;    @CircuitBreaker(name = &quot;myservice&quot;, fallbackMethod = &quot;fallback&quot;)&#10;    @Retry(name = &quot;myservice&quot;)&#10;    public String callExternalService() {&#10;        // Your code&#10;    }&#10;    &#10;    public String fallback(Exception ex) {&#10;        return &quot;Service unavailable&quot;;&#10;    }&#10;}&#10;```&#10;&#10;---&#10;&#10;##  Troubleshooting&#10;&#10;### Problem: Port Already in Use&#10;```bash&#10;# Find process using port 8080&#10;lsof -i :8080  # macOS/Linux&#10;netstat -ano | findstr :8080  # Windows&#10;&#10;# Kill process&#10;kill -9 &lt;PID&gt;  # macOS/Linux&#10;taskkill /PID &lt;PID&gt; /F  # Windows&#10;```&#10;&#10;### Problem: Database Connection Failed&#10;```bash&#10;# Check if Docker service is running&#10;docker ps&#10;&#10;# Check database connectivity&#10;docker exec mysql mysql -u root -ppassword -e &quot;SELECT 1&quot;&#10;&#10;# View docker logs&#10;docker logs mysql&#10;```&#10;&#10;### Problem: Kafka Producer Timeout&#10;```bash&#10;# Check Kafka is running&#10;docker exec kafka kafka-broker-api-versions.sh --bootstrap-server localhost:9092&#10;&#10;# Check topic exists&#10;docker exec kafka kafka-topics.sh --list --bootstrap-server localhost:9092&#10;&#10;# Create topic if needed&#10;docker exec kafka kafka-topics.sh --create --topic order-placed \&#10;  --bootstrap-server localhost:9092 --partitions 1 --replication-factor 1&#10;```&#10;&#10;### Problem: OutOfMemory Exception&#10;```bash&#10;# Increase JVM heap&#10;export _JAVA_OPTIONS=&quot;-Xmx1024m&quot;&#10;mvn spring-boot:run&#10;&#10;# Or in docker-compose&#10;environment:&#10;  - JAVA_OPTS=-Xmx1024m -Xms512m&#10;```&#10;&#10;### Problem: Slow Queries&#10;```bash&#10;# Enable query logging&#10;spring.jpa.properties.hibernate.generate_statistics=true&#10;spring.jpa.properties.hibernate.use_sql_comments=true&#10;&#10;# Or for MySQL&#10;mysql -u root -ppassword -e &quot;SET GLOBAL slow_query_log=1;&quot;&#10;mysql -u root -ppassword -e &quot;SET GLOBAL long_query_time=2;&quot;&#10;```&#10;&#10;---&#10;&#10;##  Documentation Resources&#10;&#10;- **Official Docs**: https://docs.spring.io/&#10;- **Spring Boot**: https://spring.io/projects/spring-boot&#10;- **Spring Cloud**: https://spring.io/projects/spring-cloud&#10;- **This Project**: &#10;  - ANALYSIS.md (Architecture détaillée)&#10;  - ADAPTATION_GUIDE.md (Comment adapter)&#10;  - SEQUENCE_DIAGRAMS.md (Flux métier)&#10;  - QUICK_REFERENCE.md (Ce fichier)&#10;&#10;---&#10;&#10;##  Checklist de Démarrage&#10;&#10;- [ ] Cloner le repository&#10;- [ ] Installer Docker &amp; Docker Compose&#10;- [ ] Installer Java 21+&#10;- [ ] Installer Maven&#10;- [ ] Configurer Keycloak (si OAuth2 requis)&#10;- [ ] Lancer `docker-compose up`&#10;- [ ] Vérifier `docker ps` - tous les services up&#10;- [ ] Tester les endpoints&#10;- [ ] Vérifier Grafana (http://localhost:3000)&#10;- [ ] Lire ANALYSIS.md pour comprendre l'architecture&#10;- [ ] Identifier vos adaptations nécessaires&#10;- [ ] Commencer à implémenter!&#10;&#10;---&#10;&#10;**Happy Coding! **&#10;&#10;Pour plus de détails, consultez:&#10;- ANALYSIS.md - Architecture complète&#10;- ADAPTATION_GUIDE.md - Guide d'adaptation&#10;- SEQUENCE_DIAGRAMS.md - Diagrammes de flux&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/test-services.ps1">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/test-services.ps1" />
              <option name="updatedContent" value="# Script de Test Automatisé - Spring Commerce Services&#10;# Usage: ./test-services.ps1&#10;&#10;Write-Host &quot;╔════════════════════════════════════════════════════════════════════╗&quot; -ForegroundColor Cyan&#10;Write-Host &quot;║          Test Automatisé - Spring Commerce Services            ║&quot; -ForegroundColor Cyan&#10;Write-Host &quot;╚════════════════════════════════════════════════════════════════════╝&quot; -ForegroundColor Cyan&#10;&#10;# Configuration&#10;$PROJECT_ROOT = &quot;C:\Users\dell\Documents\E-commerce Project\springcommerce&quot;&#10;$PRODUCT_PORT = 8080&#10;$ORDER_PORT = 8081&#10;$INVENTORY_PORT = 8082&#10;$GATEWAY_PORT = 9000&#10;&#10;Write-Host &quot;`n&quot; -ForegroundColor Green&#10;Write-Host &quot; Configuration:&quot; -ForegroundColor Green&#10;Write-Host &quot;  - Chemin projet: $PROJECT_ROOT&quot;&#10;Write-Host &quot;  - Product Service: localhost:$PRODUCT_PORT&quot;&#10;Write-Host &quot;  - Order Service: localhost:$ORDER_PORT&quot;&#10;Write-Host &quot;  - Inventory Service: localhost:$INVENTORY_PORT&quot;&#10;Write-Host &quot;  - API Gateway: localhost:$GATEWAY_PORT&quot;&#10;&#10;# Fonction: Vérifier si un service répond&#10;function Test-ServiceHealth {&#10;    param([string]$ServiceName, [int]$Port)&#10;    &#10;    Write-Host &quot;`n Vérification: $ServiceName (Port $Port)...&quot; -ForegroundColor Yellow&#10;    &#10;    try {&#10;        $response = Invoke-RestMethod -Uri &quot;http://localhost:$Port/actuator/health&quot; -Method Get -TimeoutSec 5&#10;        if ($response.status -eq &quot;UP&quot;) {&#10;            Write-Host &quot;✅ $ServiceName - HEALTHY (Status: $($response.status))&quot; -ForegroundColor Green&#10;            return $true&#10;        } else {&#10;            Write-Host &quot;⚠️  $ServiceName - UNHEALTHY (Status: $($response.status))&quot; -ForegroundColor Yellow&#10;            return $false&#10;        }&#10;    }&#10;    catch {&#10;        Write-Host &quot;❌ $ServiceName - UNREACHABLE (Erreur: $($_.Exception.Message))&quot; -ForegroundColor Red&#10;        return $false&#10;    }&#10;}&#10;&#10;# Fonction: Créer un produit&#10;function Create-Product {&#10;    param([string]$Name, [string]$Description, [double]$Price)&#10;    &#10;    Write-Host &quot;`n Création de produit...&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  - Nom: $Name&quot;&#10;    Write-Host &quot;  - Description: $Description&quot;&#10;    Write-Host &quot;  - Prix: `$$Price&quot;&#10;    &#10;    try {&#10;        $body = @{&#10;            name = $Name&#10;            description = $Description&#10;            price = $Price&#10;        } | ConvertTo-Json&#10;        &#10;        $response = Invoke-RestMethod -Uri &quot;http://localhost:$GATEWAY_PORT/api/product&quot; `&#10;            -Method Post `&#10;            -ContentType &quot;application/json&quot; `&#10;            -Body $body `&#10;            -TimeoutSec 10&#10;        &#10;        Write-Host &quot;✅ Produit créé!&quot; -ForegroundColor Green&#10;        Write-Host &quot;  - ID: $($response.id)&quot;&#10;        Write-Host &quot;  - Nom: $($response.name)&quot;&#10;        return $response.id&#10;    }&#10;    catch {&#10;        Write-Host &quot;❌ Erreur lors de la création: $($_.Exception.Message)&quot; -ForegroundColor Red&#10;        return $null&#10;    }&#10;}&#10;&#10;# Fonction: Récupérer tous les produits&#10;function Get-AllProducts {&#10;    Write-Host &quot;`n Récupération de tous les produits...&quot; -ForegroundColor Yellow&#10;    &#10;    try {&#10;        $response = Invoke-RestMethod -Uri &quot;http://localhost:$GATEWAY_PORT/api/product&quot; `&#10;            -Method Get `&#10;            -TimeoutSec 10&#10;        &#10;        if ($response.Count -gt 0) {&#10;            Write-Host &quot;✅ $($response.Count) produit(s) trouvé(s):&quot; -ForegroundColor Green&#10;            foreach ($product in $response) {&#10;                Write-Host &quot;  - $($product.name): `$$($product.price)&quot; -ForegroundColor Cyan&#10;            }&#10;        } else {&#10;            Write-Host &quot;⚠️  Aucun produit trouvé&quot; -ForegroundColor Yellow&#10;        }&#10;        &#10;        return $response&#10;    }&#10;    catch {&#10;        Write-Host &quot;❌ Erreur: $($_.Exception.Message)&quot; -ForegroundColor Red&#10;        return $null&#10;    }&#10;}&#10;&#10;# Fonction: Vérifier le stock&#10;function Check-Inventory {&#10;    param([string]$SkuCode, [int]$Quantity)&#10;    &#10;    Write-Host &quot;`n Vérification du stock...&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  - SKU: $SkuCode&quot;&#10;    Write-Host &quot;  - Quantité demandée: $Quantity&quot;&#10;    &#10;    try {&#10;        $response = Invoke-RestMethod -Uri &quot;http://localhost:$GATEWAY_PORT/api/inventory?skuCode=$SkuCode&amp;quantity=$Quantity&quot; `&#10;            -Method Get `&#10;            -TimeoutSec 10&#10;        &#10;        if ($response -eq &quot;true&quot;) {&#10;            Write-Host &quot;✅ Stock disponible: OUI&quot; -ForegroundColor Green&#10;            return $true&#10;        } else {&#10;            Write-Host &quot;❌ Stock disponible: NON&quot; -ForegroundColor Red&#10;            return $false&#10;        }&#10;    }&#10;    catch {&#10;        Write-Host &quot;❌ Erreur: $($_.Exception.Message)&quot; -ForegroundColor Red&#10;        return $false&#10;    }&#10;}&#10;&#10;# Fonction: Placer une commande&#10;function Place-Order {&#10;    param([string]$SkuCode, [double]$Price, [int]$Quantity, [string]$Email)&#10;    &#10;    Write-Host &quot;`n Placement d'une commande...&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  - SKU: $SkuCode&quot;&#10;    Write-Host &quot;  - Prix: `$$Price&quot;&#10;    Write-Host &quot;  - Quantité: $Quantity&quot;&#10;    Write-Host &quot;  - Email: $Email&quot;&#10;    &#10;    try {&#10;        $body = @{&#10;            skuCode = $SkuCode&#10;            price = $Price&#10;            quantity = $Quantity&#10;            userDetails = @{&#10;                email = $Email&#10;                firstName = &quot;Test&quot;&#10;                lastName = &quot;User&quot;&#10;            }&#10;        } | ConvertTo-Json&#10;        &#10;        $response = Invoke-RestMethod -Uri &quot;http://localhost:$GATEWAY_PORT/api/order&quot; `&#10;            -Method Post `&#10;            -ContentType &quot;application/json&quot; `&#10;            -Body $body `&#10;            -TimeoutSec 10&#10;        &#10;        Write-Host &quot;✅ Commande placée avec succès!&quot; -ForegroundColor Green&#10;        Write-Host &quot;  - Message: $response&quot;&#10;        return $true&#10;    }&#10;    catch {&#10;        Write-Host &quot;❌ Erreur lors du placement: $($_.Exception.Message)&quot; -ForegroundColor Red&#10;        return $false&#10;    }&#10;}&#10;&#10;# ===== DÉBUT DES TESTS =====&#10;&#10;Write-Host &quot;`n&quot; -ForegroundColor Cyan&#10;Write-Host &quot;═══════════════════════════════════════════════════════════════════&quot; -ForegroundColor Cyan&#10;Write-Host &quot;ÉTAPE 1: Vérifier la santé des services&quot; -ForegroundColor Cyan&#10;Write-Host &quot;═══════════════════════════════════════════════════════════════════&quot; -ForegroundColor Cyan&#10;&#10;$productHealthy = Test-ServiceHealth &quot;Product Service&quot; $PRODUCT_PORT&#10;$orderHealthy = Test-ServiceHealth &quot;Order Service&quot; $ORDER_PORT&#10;$inventoryHealthy = Test-ServiceHealth &quot;Inventory Service&quot; $INVENTORY_PORT&#10;$gatewayHealthy = Test-ServiceHealth &quot;API Gateway&quot; $GATEWAY_PORT&#10;&#10;if ($productHealthy -and $orderHealthy -and $inventoryHealthy -and $gatewayHealthy) {&#10;    Write-Host &quot;`n✅ Tous les services sont HEALTHY!&quot; -ForegroundColor Green&#10;} else {&#10;    Write-Host &quot;`n⚠️  Certains services ne sont pas prêts. Continuez à vos risques!&quot; -ForegroundColor Yellow&#10;}&#10;&#10;# ===== TEST PRODUCT SERVICE =====&#10;Write-Host &quot;`n&quot; -ForegroundColor Cyan&#10;Write-Host &quot;═══════════════════════════════════════════════════════════════════&quot; -ForegroundColor Cyan&#10;Write-Host &quot;ÉTAPE 2: Tester Product Service&quot; -ForegroundColor Cyan&#10;Write-Host &quot;═══════════════════════════════════════════════════════════════════&quot; -ForegroundColor Cyan&#10;&#10;$product1 = Create-Product &quot;iPhone 15 Pro&quot; &quot;Latest Apple smartphone&quot; 999.99&#10;$product2 = Create-Product &quot;Samsung Galaxy S24&quot; &quot;Latest Samsung flagship&quot; 899.99&#10;$product3 = Create-Product &quot;Google Pixel 8&quot; &quot;Google flagship with AI&quot; 799.99&#10;&#10;Write-Host &quot;`n&quot; -ForegroundColor Cyan&#10;Get-AllProducts&#10;&#10;# ===== TEST INVENTORY SERVICE =====&#10;Write-Host &quot;`n&quot; -ForegroundColor Cyan&#10;Write-Host &quot;═══════════════════════════════════════════════════════════════════&quot; -ForegroundColor Cyan&#10;Write-Host &quot;ÉTAPE 3: Tester Inventory Service&quot; -ForegroundColor Cyan&#10;Write-Host &quot;═══════════════════════════════════════════════════════════════════&quot; -ForegroundColor Cyan&#10;&#10;Write-Host &quot;`n NOTE: Pour tester l'inventaire, vous devez d'abord insérer des données!&quot; -ForegroundColor Yellow&#10;Write-Host &quot;Exécutez dans MySQL:&quot; -ForegroundColor Yellow&#10;Write-Host &quot;  USE inventory_service;&quot; -ForegroundColor Gray&#10;Write-Host &quot;  INSERT INTO t_inventory (skuCode, quantity) VALUES ('iphone_15', 10);&quot; -ForegroundColor Gray&#10;Write-Host &quot;  INSERT INTO t_inventory (skuCode, quantity) VALUES ('galaxy_s24', 15);&quot; -ForegroundColor Gray&#10;Write-Host &quot;  INSERT INTO t_inventory (skuCode, quantity) VALUES ('pixel_8', 8);&quot; -ForegroundColor Gray&#10;&#10;# Tenter de vérifier les stocks (ils peuvent ne pas exister encore)&#10;Write-Host &quot;`n&quot;&#10;Check-Inventory &quot;iphone_15&quot; 2&#10;Check-Inventory &quot;galaxy_s24&quot; 20&#10;Check-Inventory &quot;pixel_8&quot; 5&#10;&#10;# ===== TEST ORDER SERVICE =====&#10;Write-Host &quot;`n&quot; -ForegroundColor Cyan&#10;Write-Host &quot;═══════════════════════════════════════════════════════════════════&quot; -ForegroundColor Cyan&#10;Write-Host &quot;ÉTAPE 4: Tester Order Service&quot; -ForegroundColor Cyan&#10;Write-Host &quot;═══════════════════════════════════════════════════════════════════&quot; -ForegroundColor Cyan&#10;&#10;Write-Host &quot;`n NOTE: Les commandes nécessitent du stock disponible en inventaire!&quot; -ForegroundColor Yellow&#10;&#10;# Essayer de placer des commandes&#10;$order1 = Place-Order &quot;iphone_15&quot; 999.99 2 &quot;customer1@example.com&quot;&#10;$order2 = Place-Order &quot;galaxy_s24&quot; 899.99 3 &quot;customer2@example.com&quot;&#10;$order3 = Place-Order &quot;pixel_8&quot; 799.99 1 &quot;customer3@example.com&quot;&#10;&#10;# ===== RÉSUMÉ FINAL =====&#10;Write-Host &quot;`n&quot; -ForegroundColor Cyan&#10;Write-Host &quot;═══════════════════════════════════════════════════════════════════&quot; -ForegroundColor Cyan&#10;Write-Host &quot; RÉSUMÉ DES TESTS&quot; -ForegroundColor Cyan&#10;Write-Host &quot;═══════════════════════════════════════════════════════════════════&quot; -ForegroundColor Cyan&#10;&#10;Write-Host &quot;`n✅ Services Vérifiés:&quot; -ForegroundColor Green&#10;Write-Host &quot;  - Product Service: $(if ($productHealthy) { 'UP' } else { 'DOWN' })&quot; -ForegroundColor $(if ($productHealthy) { 'Green' } else { 'Red' })&#10;Write-Host &quot;  - Order Service: $(if ($orderHealthy) { 'UP' } else { 'DOWN' })&quot; -ForegroundColor $(if ($orderHealthy) { 'Green' } else { 'Red' })&#10;Write-Host &quot;  - Inventory Service: $(if ($inventoryHealthy) { 'UP' } else { 'DOWN' })&quot; -ForegroundColor $(if ($inventoryHealthy) { 'Green' } else { 'Red' })&#10;Write-Host &quot;  - API Gateway: $(if ($gatewayHealthy) { 'UP' } else { 'DOWN' })&quot; -ForegroundColor $(if ($gatewayHealthy) { 'Green' } else { 'Red' })&#10;&#10;Write-Host &quot;`n Prochaines Étapes:&quot; -ForegroundColor Cyan&#10;Write-Host &quot;  1. Vérifier les logs: docker logs -f &lt;container_name&gt;&quot; -ForegroundColor Gray&#10;Write-Host &quot;  2. Voir Grafana: http://localhost:3000&quot; -ForegroundColor Gray&#10;Write-Host &quot;  3. Voir les métriques: http://localhost:9090&quot; -ForegroundColor Gray&#10;Write-Host &quot;  4. Consulter TESTING_GUIDE.md pour plus de détails&quot; -ForegroundColor Gray&#10;&#10;Write-Host &quot;`n✨ Tests Terminés!&quot; -ForegroundColor Green&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>